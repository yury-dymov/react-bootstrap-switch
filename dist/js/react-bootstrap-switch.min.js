/* ========================================================================
 * react-bootstrap-switch - v3.5.0
 * https://github.com/Julusian/react-bootstrap-switch
 * ========================================================================
 * Copyright 2012-2015 Julian Waller
 *
 * Released under the MIT license
 * ========================================================================
 */

(function(){var t,e;t=require("react"),e=require("react-dom").findDOMNode,module.exports=t.createClass({defaults:{state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:" ",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper"},getInitialState:function(){return{state:this._prop("state"),handleWidth:this._prop("handleWidth"),labelWidth:this._prop("labelWidth"),offset:null,skipAnimation:!0,dragStart:!1,focus:!1,disabled:this._prop("disabled"),readonly:this._prop("readonly"),indeterminate:this._prop("indeterminate")}},componentWillReceiveProps:function(t){return this.disabled(!!t.disabled),this.value(t.state,t)},_prop:function(t){return"undefined"==typeof this.props[t]?this.defaults[t]:this.props[t]},value:function(t,e){var n,a;return null==e&&(e={}),n="undefined"==typeof e.disabled?this.state.disabled:e.disabled,a="undefined"==typeof e.readonly?this.state.readonly:e.readonly,"undefined"==typeof t?this.state.state:n||a?this:this.state.state===t?this:(this._changeState(!!t),this)},valueState:function(t){return this.value(t)},toggleState:function(){return this.toggleValue()},toggleValue:function(){return this.state.disabled||this.state.readonly?this:this._changeState(this.state.indeterminate?!0:!this.state.state)},disabled:function(t){return"undefined"==typeof t?this.state.disabled:(t=!!t,t===this.state.disabled?this:this.toggleDisabled())},toggleDisabled:function(){return this.setState({disabled:!this.state.disabled}),this},readonly:function(t){return"undefined"==typeof t?this.state.readonly:(t=!!t,t===this.state.readonly?this:this.toggleReadonly())},toggleReadonly:function(){return this.setState({readonly:!this.state.readonly}),this},handleWidth:function(t){return"undefined"==typeof t?this.state.handleWidth:(this.setState({handleWidth:t},function(t){return function(){return t._width(),t._containerPosition()}}(this)),this)},labelWidth:function(t){return"undefined"==typeof t?this.state.labelWidth:(this.setState({labelWidth:t},function(t){return function(){return t._width(),t._containerPosition()}}(this)),this)},_fireStateChange:function(){return"undefined"!=typeof this.props.onChange?this.props.onChange.length>=2?this.props.onChange(this,this.state.state):this.props.onChange(this.state.state):void 0},_changeState:function(t){return this.setState({indeterminate:!1,state:t},function(t){return function(){return t._containerPosition(),t._fireStateChange()}}(this))},_handleToggle:function(t,e){return t.preventDefault(),t.stopPropagation(),this.state.disabled||this.state.readonly?void 0:(this._changeState(e),this._handleElementFocus)},_handleOnClick:function(t){return this._handleToggle(t,!1)},_handleOffClick:function(t){return this._handleToggle(t,!0)},componentDidMount:function(){var t,n,a;return t=function(t){return function(){return t._width(function(){return t._containerPosition(null)})}}(this),a=function(t){return function(){var n;return n=e(t._wrapper),n.offsetWidth>0&&n.offsetHeight>0}}(this),a()?t():n=window.setInterval(function(){return a()?(t(),window.clearInterval(n)):void 0},50)},_width:function(t){var n,a,s;return a=e(this._on).offsetWidth,n=e(this._off).offsetWidth,s=Math.max(a,n),this.setState({handleWidth:s,labelWidth:s},t)},_containerPosition:function(t){var e,n;return null==t&&(t=this.state.state),n=[0,"-"+this.state.handleWidth+"px"],e=null===this.state.offset,this.setState(this.state.indeterminate?{skipAnimation:e,offset:"-"+this.state.handleWidth/2+"px"}:t?{skipAnimation:e,offset:this._prop("inverse")?n[1]:n[0]}:{skipAnimation:e,offset:this._prop("inverse")?n[0]:n[1]})},_handleElementChange:function(t){return function(e){return e.preventDefault(),e.stopImmediatePropagation(),t._changeState(!t.state.state)}}(this),_handleElementFocus:function(t){return function(e){return e&&e.preventDefault(),t.setState({focus:!0})}}(this),_handleElementBlur:function(t){return function(e){return e.preventDefault(),t.setState({focus:!1})}}(this),_handleElementKeyDown:function(t){return function(e){if(e.which&&!t.state.disabled&&!t.state.readonly)switch(e.which){case 37:return e.preventDefault(),e.stopImmediatePropagation(),t._changeState(!1);case 39:return e.preventDefault(),e.stopImmediatePropagation(),t._changeState(!0)}}}(this),_handleLabelClick:function(t){return t.stopPropagation()},_handleLabelMouseDown:function(t){return this.state.dragStart||this.state.disabled||this.state.readonly?void 0:(t.preventDefault(),t.stopPropagation(),this.setState({indeterminate:!1,dragStart:(t.pageX||t.originalEvent.touches[0].pageX)-parseInt(this.state.offset,10)}),this._handleElementFocus)},_handleLabelTouchStart:function(t){return this._handleLabelMouseDown(t)},_handleLabelMouseMove:function(t){var e;if(null!=this.state.dragStart&&(t.preventDefault(),e=(t.pageX||t.originalEvent.touches[0].pageX)-this.state.dragStart,!(e<-this.state.handleWidth||e>0)))return this.setState({skipAnimation:!1,offset:e+"px",dragged:!0})},_handleLabelTouchMove:function(t){return this._handleLabelMouseMove(t)},_handleLabelMouseUp:function(t){var e,n;if(this.state.dragStart)return t.preventDefault(),n=!this.state.state,this.state.dragged&&(e=parseInt(this.state.offset),n=e>-(this.state.handleWidth/2),n=this._prop("inverse")?!n:n),this.setState({dragStart:!1,dragged:!1,state:n},function(t){return function(){return t._containerPosition(),t._fireStateChange()}}(this))},_handleLabelTouchEnd:function(t){return this._handleLabelMouseUp(t)},_handleLabelMouseLeave:function(t){return this._handleLabelMouseUp(t)},render:function(){var e,n,a,s,i,o;return i=function(t){return function(){var e;return e=[""+t._prop("baseClass")].concat(t._prop("wrapperClass")),e.push(t.state.state?t._prop("baseClass")+"-on":t._prop("baseClass")+"-off"),null!=t._prop("size")&&e.push(t._prop("baseClass")+"-"+t._prop("size")),t.state.disabled&&e.push(t._prop("baseClass")+"-disabled"),t.state.readonly&&e.push(t._prop("baseClass")+"-readonly"),t.state.indeterminate&&e.push(t._prop("baseClass")+"-indeterminate"),t._prop("inverse")&&e.push(t._prop("baseClass")+"-inverse"),t._prop("id")&&e.push(t._prop("baseClass")+"-id-"+t._prop("id")),!t._prop("animate")||t.state.dragStart||t.state.skipAnimation||e.push(t._prop("baseClass")+"-animate"),t.state.focus&&e.push(t._prop("baseClass")+"-focused"),e.join(" ")}}(this)(),s=t.createElement("span",{ref:function(t){return function(e){return t._on=e}}(this),style:{width:this.state.handleWidth},onClick:this._handleOnClick,className:this._prop("baseClass")+"-handle-on "+this._prop("baseClass")+"-"+this._prop("onColor")},this._prop("onText")),n=t.createElement("span",{className:this._prop("baseClass")+"-label",style:{width:this.state.labelWidth},ref:function(t){return function(e){return t._label=e}}(this),onClick:this._handleLabelClick,onMouseDown:this._handleLabelMouseDown,onTouchDown:this._handleLabelTouchStart,onMouseMove:this._handleLabelMouseMove,onTouchMove:this._handleLabelTouchMove,onMouseUp:this._handleLabelMouseUp,onMouseLeave:this._handleLabelMouseLeave,onTouchEnd:this._handleLabelTouchEnd},this._prop("labelText")),a=t.createElement("span",{ref:function(t){return function(e){return t._off=e}}(this),style:{width:this.state.handleWidth},onClick:this._handleOffClick,className:this._prop("baseClass")+"-handle-off "+this._prop("baseClass")+"-"+this._prop("offColor")},this._prop("offText")),e=this.state.labelWidth+2*this.state.handleWidth,o=this.state.labelWidth+this.state.handleWidth,e===o&&(e=o="auto"),t.createElement("div",{className:i,ref:function(t){return function(e){return t._wrapper=e}}(this),style:{width:o}},t.createElement("div",{className:this._prop("baseClass")+"-container",ref:function(t){return function(e){return t._container=e}}(this),style:{width:e,marginLeft:this.state.offset}},this._prop("inverse")?a:s,n,this._prop("inverse")?s:a,t.createElement("input",{type:"checkbox",onChange:this._handleElementChange,_onFocus:this._handleElementFocus,onBlur:this._handleElementBlur,onKeyDown:this._handleElementKeyDown})))}})}).call(this);